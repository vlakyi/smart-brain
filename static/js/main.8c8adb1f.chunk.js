(this.webpackJsonpfacerecognationbrain=this.webpackJsonpfacerecognationbrain||[]).push([[0],{24:function(e,a,t){e.exports=t.p+"static/media/face_recognition.2bb0dac3.svg"},27:function(e,a,t){e.exports=t(46)},32:function(e,a,t){},39:function(e,a,t){},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){},44:function(e,a,t){},46:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(14),s=t.n(i),o=(t(32),t(4)),c=t.n(o),l=t(8),m=t(19),u=t(20),p=t(26),d=t(25),b=t(2),h=t(9),f=r.a.memo((function(e){var a=e.signOut;return"/smartbrain/home"===Object(b.h)().pathname?r.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(h.b,{to:function(){},onClick:a,className:"f3 link dim black pa3 pointer"}," Sign Out")):r.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(h.b,{to:"/smartbrain/signin",className:"f3 link dim black pa3 pointer"}," Sign In"),r.a.createElement(h.b,{to:"/smartbrain/register",className:"f3 link dim black pa3 pointer"}," Register"))})),g=t(22),v=t.n(g),w=t(1),E=t(12),O=(t(39),function(e){var a=e.headerText,t=e.mainText,n=e.buttonText,i=e.isModalOpen,s=e.closeModal;return i?r.a.createElement("div",{className:"modal_overlay"},r.a.createElement("div",{className:"modal_container"},r.a.createElement("h1",null,a),r.a.createElement("p",null,t),r.a.createElement("button",{onClick:s},n))):""}),N=(t(40),function(){var e=Object(l.a)(c.a.mark((function e(a,t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(a,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(w.a)({},t))}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(a,t,n){return e.apply(this,arguments)}}()),y=function(){var e=Object(l.a)(c.a.mark((function e(a,t,n,r){var i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(a,t,"post");case 3:(i=e.sent).id?n(i):r("no user id was returned"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),r(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a,t,n,r){return e.apply(this,arguments)}}(),k=function(e,a,t){a(e),localStorage.setItem("smartbrain_user",JSON.stringify(e)),t.push("/smartbrain/home")},x=function(e,a,t){console.log(e),t(Object(w.a)(Object(w.a)({},a),{},{isModalOpen:!0}))},j=function(e){var a=e.loadUser,t=Object(b.g)(),i=Object(n.useState)({email:"",password:"",isModalOpen:!1}),s=Object(E.a)(i,2),o=s[0],m=s[1],u=function(){var e=Object(l.a)(c.a.mark((function e(){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.email,r=o.password,(""!==n||""!==r)&&n.includes("@")&&n.includes(".")||m(Object(w.a)(Object(w.a)({},o),{},{isModalOpen:!0})),y("https://secure-bastion-14247.herokuapp.com/signin",{email:n,password:r},(function(e){return k(e,a,t)}),(function(e){return x(e,o,m)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{headerText:"Wrong Credentials",mainText:"Please, check your credentials and try again!",buttonText:"Try Again",isModalOpen:o.isModalOpen,closeModal:function(){m(Object(w.a)(Object(w.a)({},o),{},{isModalOpen:!1}))}}),r.a.createElement("article",{className:"br3 ba b--blalck-10 mv4 w-100 w-50-m w-25-1 mw6 shadow-5 center"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f2 fw6 ph0 mh0"},"Sign In"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6 tl",htmlFor:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:function(e){m(Object(w.a)(Object(w.a)({},o),{},{email:e.target.value}))}})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6 tl",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:function(e){m(Object(w.a)(Object(w.a)({},o),{},{password:e.target.value}))}}))),r.a.createElement("div",{className:"flex items-center justify-between"},r.a.createElement("input",{onClick:u,className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in"}),r.a.createElement(h.b,{to:"/smartbrain/register",className:"f6 link dim black db pointer"},"Register"))))))},S=function(e){var a=e.loadUser,t=Object(b.g)(),i=Object(n.useState)({email:"",password:"",name:"",isModalOpen:!1}),s=Object(E.a)(i,2),o=s[0],m=s[1],u=function(){var e=Object(l.a)(c.a.mark((function e(){var n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.email,r=o.password,i=o.name,""!==n&&""!==r&&""!==i&&n.includes("@")&&n.includes(".")){e.next=4;break}return m(Object(w.a)(Object(w.a)({},o),{},{isModalOpen:!0})),e.abrupt("return");case 4:y("https://secure-bastion-14247.herokuapp.com/register",{email:n,password:r,name:i},(function(e){return k(e,a,t)}),(function(e){return x(e,o,m)}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{headerText:"Wrong Credentials",mainText:"Please, check your credentials and try again!",buttonText:"Try Again",isModalOpen:o.isModalOpen,closeModal:function(){m(Object(w.a)(Object(w.a)({},o),{},{isModalOpen:!1}))}}),r.a.createElement("article",{className:"br3 ba b--blalck-10 mv4 w-100 w-50-m w-25-1 mw6 shadow-5 center"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f2 fw6 ph0 mh0"},"Register"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6 tl",htmlFor:"name"},"Name"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"name",id:"name",onChange:function(e){m(Object(w.a)(Object(w.a)({},o),{},{name:e.target.value}))}})),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6 tl",htmlFor:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:function(e){m(Object(w.a)(Object(w.a)({},o),{},{email:e.target.value}))}})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6 tl",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",title:"Must contain at least one number and one uppercase and lowercase letter,\r and at least 8 or more characters",onChange:function(e){m(Object(w.a)(Object(w.a)({},o),{},{password:e.target.value}))},required:!0}))),r.a.createElement("div",{className:"flex"},r.a.createElement("input",{onClick:u,className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Register"}))))))},M=t(23),C=t.n(M),T=(t(41),t(24)),U=t.n(T),_=function(){return r.a.createElement("div",{className:"ma4 mt0"},r.a.createElement(C.a,{className:"Tilt br2 shadow-2 logo-container",options:{max:55},style:{height:150,width:150}},r.a.createElement("div",{className:"Tilt-inner pa3"},r.a.createElement("img",{alt:"logo",src:U.a}))))},I=function(e){var a=e.name,t=e.entries;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"white f3"},"".concat(a,", your current entry count is...")),r.a.createElement("div",{className:"white f1"},t))},F=(t(42),function(e){var a=e.onInputChange,t=e.onButtonSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"f3"},"This Magic Brain will detect faces in your pictures. Give it a try."),r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"input_container center form pa4 br3 shadow-5"},r.a.createElement("input",{className:"f4 pa2 w-70 center",type:"tex",onChange:a}),r.a.createElement("button",{className:"w-30 grow f4 link ph3 pv2 dib white bg-light-purple",onClick:t},"Detect"))))}),A=(t(43),function(e){var a=e.imageUrl,t=e.box;return r.a.createElement("div",{className:"center ma"},r.a.createElement("div",{className:"absolute mt2"},r.a.createElement("img",{id:"inputimage",alt:"",src:a,width:"500px",heigh:"auto"}),r.a.createElement("div",{className:"bounding-box",style:{top:t.topRow,right:t.rightCol,bottom:t.bottomRow,left:t.leftCol}})))}),B=function(e){var a=e.name,t=e.entries,n=e.box,i=e.imageUrl,s=e.isModalOpen,o=e.closeModal,c=e.onInputChange,l=e.onButtonSubmit;return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{headerText:"Wrong Image Url",mainText:"Please, use correct image url and try again",buttonText:"Try Again",isModalOpen:s,closeModal:o}),r.a.createElement(_,null),r.a.createElement(I,{name:a,entries:t}),r.a.createElement(F,{onInputChange:c,onButtonSubmit:l}),r.a.createElement(A,{box:n,imageUrl:i}))},R=(t(44),{particles:{number:{value:80,density:{enable:!0,value_area:800}}}}),W={input:"",imageUrl:"",box:{},isSignedIn:!1,user:localStorage.getItem("smartbrain_user")?JSON.parse(localStorage.getItem("smartbrain_user")):{id:"",name:"",email:"",entries:0,joined:""},isModalOpen:!1},P=function(e){Object(p.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).loadUser=function(e){n.setState({user:{id:e.id,name:e.name,email:e.email,entries:e.entries,joined:e.joined}})},n.calculateFaceLocation=function(e){var a=e.outputs[0].data.regions[0].region_info.bounding_box,t=document.getElementById("inputimage"),n=Number(t.width),r=Number(t.height);return{leftCol:a.left_col*n,topRow:a.top_row*r,rightCol:n-a.right_col*n,bottomRow:r-a.bottom_row*r}},n.displayFaceBox=function(e){n.setState({box:e})},n.onInputChange=function(e){n.setState({input:e.target.value})},n.onButtonSubmit=Object(l.a)(c.a.mark((function e(){var a,t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.state,t=a.input,r=a.user,!t){e.next=10;break}if(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/.test(t)){e.next=6;break}return n.setState({isModalOpen:!0}),e.abrupt("return");case 6:n.setState({imageUrl:t}),N("https://secure-bastion-14247.herokuapp.com/imageurl",{input:t},"post").then((function(e){e&&N("https://secure-bastion-14247.herokuapp.com/image",{id:r.id},"put").then((function(e){n.setState(Object.assign(r,{entries:e}))})).catch((function(e){n.setState({isModalOpen:!0}),console.log(e)})),n.displayFaceBox(n.calculateFaceLocation(e))})).catch((function(e){n.setState({isModalOpen:!0}),console.log(e)})),e.next=11;break;case 10:n.setState({isModalOpen:!0});case 11:case"end":return e.stop()}}),e)}))),n.closeModal=function(){n.setState({isModalOpen:!1})},n.signOut=function(){"/smartbrain/home"===n.props.location.pathname&&(localStorage.removeItem("smartbrain_user"),n.setState(W))},n.passSignInUser=function(){var e=n.state,a=e.imageUrl,t=e.box,i=e.user,s=i.id,o=i.name,c=i.entries,l=e.isModalOpen;return""!==s?r.a.createElement(B,{name:o,entries:c,imageUrl:a,box:t,isModalOpen:l,closeModal:n.closeModal,onInputChange:n.onInputChange,onButtonSubmit:n.onButtonSubmit}):r.a.createElement(b.a,{to:"/smartbrain/signin"})},n.state=W,n}return Object(u.a)(t,[{key:"render",value:function(){var e=this,a=this.state.user.id;return r.a.createElement("div",{className:"App"},r.a.createElement(v.a,{className:"particles",params:R}),r.a.createElement(f,{signOut:this.signOut}),r.a.createElement(b.d,null,r.a.createElement(b.b,{exact:!0,path:"/smartbrain/home",render:this.passSignInUser}),r.a.createElement(b.b,{exact:!0,path:"/smartbrain/",render:function(){return""!==a?r.a.createElement(b.a,{to:"/smartbrain/home"}):r.a.createElement(b.a,{to:"/smartbrain/signin"})}}),r.a.createElement(b.b,{exact:!0,path:"/smartbrain/signin",render:function(){return""!==a?r.a.createElement(b.a,{to:"/smartbrain/home"}):r.a.createElement(j,{loadUser:e.loadUser})}}),r.a.createElement(b.b,{exact:!0,path:"/smartbrain/register",render:function(t){var n=t.history;return""!==a?r.a.createElement(b.a,{to:"/smartbrain/home"}):r.a.createElement(S,{loadUser:e.loadUser,history:n})}}),r.a.createElement(b.b,{render:function(){return r.a.createElement(b.a,{to:{pathname:"/smartbrain/signin"}})}})))}}]),t}(r.a.Component),J=Object(b.i)(P),z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}t(45);s.a.render(r.a.createElement(h.a,null,r.a.createElement(J,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/smartbrain",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/smartbrain","/service-worker.js");z?(!function(e,a){fetch(e).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):L(a,e)}))}}()}},[[27,1,2]]]);
//# sourceMappingURL=main.8c8adb1f.chunk.js.map